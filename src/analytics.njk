---
layout: "base.njk"
title: "Blog Analytics"
permalink: "/analytics/"
---

<div class="analytics-container">
    <h1>Blog Analytics</h1>
    
    <div class="stats-cards">
        <div class="stat-card">
            <h3>Total Posts</h3>
            <p id="totalPosts">Loading...</p>
        </div>
        <div class="stat-card">
            <h3>Total Words</h3>
            <p id="totalWords">Loading...</p>
        </div>
        <div class="stat-card">
            <h3>Average Words per Post</h3>
            <p id="avgWords">Loading...</p>
        </div>
    </div>

    <div class="chart-container">
        <h2>Posts by Year</h2>
        <canvas id="yearChart"></canvas>
    </div>

    <div class="chart-container">
        <h2>Posts by Month</h2>
        <canvas id="monthChart"></canvas>
    </div>

    <div class="chart-container">
        <h2>Top Categories</h2>
        <canvas id="categoryChart"></canvas>
    </div>

    <div class="post-lengths">
        <div class="post-length">
            <h3>Longest Post</h3>
            <p id="longestPost">Loading...</p>
        </div>
        <div class="post-length">
            <h3>Shortest Post</h3>
            <p id="shortestPost">Loading...</p>
        </div>
    </div>
</div>

<style>
.analytics-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

.stats-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: #f5f5f5;
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
}

.stat-card h3 {
    margin: 0;
    color: #666;
    font-size: 1rem;
}

.stat-card p {
    margin: 0.5rem 0 0;
    font-size: 2rem;
    font-weight: bold;
    color: #333;
}

.chart-container {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chart-container h2 {
    margin: 0 0 1rem;
    color: #333;
    font-size: 1.5rem;
}

.post-lengths {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
}

.post-length {
    background: #f5f5f5;
    padding: 1.5rem;
    border-radius: 8px;
}

.post-length h3 {
    margin: 0;
    color: #666;
    font-size: 1rem;
}

.post-length p {
    margin: 0.5rem 0 0;
    color: #333;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
async function loadAnalytics() {
    try {
        const response = await fetch('/assets/analytics/blog-analytics.json');
        const data = await response.json();
        
        // Update stats cards
        document.getElementById('totalPosts').textContent = data.totalPosts;
        document.getElementById('totalWords').textContent = data.totalWords.toLocaleString();
        document.getElementById('avgWords').textContent = data.averageWordsPerPost;
        
        // Update post lengths
        document.getElementById('longestPost').textContent = 
            `${data.longestPost.title} (${data.longestPost.wordCount} words)`;
        document.getElementById('shortestPost').textContent = 
            `${data.shortestPost.title} (${data.shortestPost.wordCount} words)`;
        
        // Create year chart
        new Chart(document.getElementById('yearChart'), {
            type: 'bar',
            data: {
                labels: Object.keys(data.postsByYear),
                datasets: [{
                    label: 'Posts',
                    data: Object.values(data.postsByYear),
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
        
        // Create month chart
        new Chart(document.getElementById('monthChart'), {
            type: 'bar',
            data: {
                labels: Object.keys(data.postsByMonth),
                datasets: [{
                    label: 'Posts',
                    data: Object.values(data.postsByMonth),
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
        
        // Create category chart (top 10 categories)
        const topCategories = Object.entries(data.postsByCategory)
            .sort(([,a], [,b]) => b - a)
            .slice(0, 10);
            
        new Chart(document.getElementById('categoryChart'), {
            type: 'doughnut',
            data: {
                labels: topCategories.map(([category]) => category),
                datasets: [{
                    data: topCategories.map(([,count]) => count),
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.5)',
                        'rgba(54, 162, 235, 0.5)',
                        'rgba(255, 206, 86, 0.5)',
                        'rgba(75, 192, 192, 0.5)',
                        'rgba(153, 102, 255, 0.5)',
                        'rgba(255, 159, 64, 0.5)',
                        'rgba(199, 199, 199, 0.5)',
                        'rgba(83, 102, 255, 0.5)',
                        'rgba(40, 159, 64, 0.5)',
                        'rgba(210, 199, 199, 0.5)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(199, 199, 199, 1)',
                        'rgba(83, 102, 255, 1)',
                        'rgba(40, 159, 64, 1)',
                        'rgba(210, 199, 199, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });
        
    } catch (error) {
        console.error('Error loading analytics:', error);
    }
}

loadAnalytics();
</script> 